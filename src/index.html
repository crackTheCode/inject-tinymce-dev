<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>INJECT TinyMCE localhost</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src='//cloud.tinymce.com/stable/tinymce.min.js?apiKey=eq5ltzbqq7egk7o9pqcie7435sjry9uam05og942vqw9bz7w'></script>
	<script src="http://use.explaain.com/explaain.js"></script>
	<script src="js/inject-plugin.js"></script>
	<link rel="stylesheet" type="text/css" href="css/tinymce-inject.css">

	<script src="http://inject-server:5000/js/api/loader.js"></script>

</head>

<body>
	<p>This is my approach to TinyMCE installation</p>
	<a href="http://app.explaain.com/cards/588cdfce29d97f1200703d3d">Theresa May</a>

	<form id="tiny" method="post" action="dump.php">
		<textarea name="content">Donald Trump</textarea>
	</form>

	<div id="inject-container" data-inject></div>

	<script type="text/javascript">

		window.inject.init({
			wrapper : '[data-inject]',
			adapter : {
				insertTextIntoDoc:function(text){
					console.log("TinyMCE Insert text into doc");
				},
				getSelectedText:function(callback){
					console.log("TinyMCE Get selected text from doc");

					var text = tinymce.activeEditor.selection.getContent({format : 'text'});
					return callback && callback({data: {text: text}})
				},
				openArticleDialog:function(queryTermsOriginal, queryTermsExpanded, isWiki, content, pages){
					console.log("TinyMCE openArticleDialog",arguments);
				},
				setDialogSize:function(dialogWidth, dialogHeight){
					console.log("TinyMCE setDialogSize",arguments);
				}
			}
		}, function(inject){
			window.TinyMceInjectPlugin($, {
				openCallback : function(){
					$(window).resize();
				}
			});

			tinymce.init({
				selector: "textarea",
				plugins: [
					"advlist autolink lists link image charmap print preview anchor",
					"searchreplace visualblocks code fullscreen",
					"insertdatetime media table contextmenu paste inject"
				],
				height: 400,
				toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | inject"
			});
		});

	</script>
</body>

</html>
